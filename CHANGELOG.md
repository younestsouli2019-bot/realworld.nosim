# Changelog

## 2026-01-05
- Added on-chain verification support in ProofValidator via ChainVerifier (USDT on BSC).
- Integrated 72h Settlement SLA auto-fail pre-check in OwnerSettlementEnforcer.
- Enhanced owner settlement enforcement to queue on Bunker Mode or missing credentials and approve only after proof validation.
- Added Payoneer primary bank destinations:
  - UK: Barclays (Sort code 231486, Account 15924956)
  - Japan: MUFG (Bank code 0005, Branch 869, Account 4671926)
  - EU: Banking Circle (IBAN LU774080000041265646, BIC BCIRLULL)
- Updated owner allowlist to include Payoneer bank references.
- Tests added for SLA enforcement and owner settlement verification paths.
- Added consolidated Control Panel script to chain validation, billing, audit, reconcile, auto/run, emergency payout, and repair actions with console-format status prints.
- Enforced global owner lock guard in orchestrator; added hard-binding toggles and directive validation.
- Live configuration helpers:
  - .env.example with secure keys (no secrets committed)
  - set-live-modes script to toggle SWARM_LIVE and payout modes
  - PayPal payout+sync script to produce provider proof and mark paid_out when credentials are present
- Updated Owner Revenue Directive mapping sequence:
  - Redirected PayPal and Stripe settlements to Bank (Attijari) due to country restrictions.
  - Added comprehensive crypto (Trust Wallet, Bybit ERC20/TON) and secondary Payoneer accounts to owner policy.
  - Consolidated OWNER_ALLOWLIST with all active destinations.
- Implemented PSP webhook handler skeletons and unified proof validators:
  - PayPal signature verification and event mapping
  - Stripe endpoint signature validation
  - Payoneer HMAC verification
  - Bank Wire reference normalization
- Added append-only HMAC-signed audit logger with chain verification and integrated it into SystemAuditLogger.
- Exposed External Payment Gateway Integration for agents:
  - Programmatic API: requestAutoSettlement, requestPayPalPayout, updatePayoutStatus, getGatewayBalance
  - Internal HTTP service with secured endpoints for agent access
- Wet-run deployment validated locally; audit entries are written via append-only logger; endpoints started under AGENT_API_PORT.
